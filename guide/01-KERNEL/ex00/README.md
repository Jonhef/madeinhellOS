# `01-KERNEL / ex00`: Процесс сборки, структура проекта, дебаг
> Новые штучки: `Makefile`, `gcc`, `gdb`

Новые файлы упражнения, которые нужно посмотреть:
- `boot/newline.asm`
- `boot/bootsect.asm`
- `boot/kernel_entry.asm`
- `kernel/kernel.c`
- `build/Makefile`

## Процесс сборки
Описан тут [BUILD.md](BUILD.md)

## Структура проекта
- `boot` - файлы загрузочного сектора `.asm`
- `kernel` - файлы ядра `.c`
- `build` - мейкфайл и скомпилированные файлы, включая образ ОС `.o` `.bin` `.elf`

## Дебаг

1. Запускаем программу make с таргетом debug
```
$ make debug
```
2. Запускаем GDB в отдельном терминале
```
$ gdb
```
3. Подключаемся к порту 1234, который по дефолту прослушивает QEMU
```
(gdb) target remote localhost:1234
```
4. Загружаем символьный файл `kernel.elf` который предоставляет GDB полезную информацию для дебага. Это нужно для перевода символов (названия функций и переменных) в адреса, номеров строк в адреса кода и так далее.
```
(gdb) symbol-file kernel.elf
```
4. Ставим брейкпоинт на функции `kmain`
```
(gdb) b kmain
```
5. Запускаем программу
```
(gdb) continue
```
6. Идем читать гайд по GDB
```
Например тут https://habr.com/ru/post/491534/
```
